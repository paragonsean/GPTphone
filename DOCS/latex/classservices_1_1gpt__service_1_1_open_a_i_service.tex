\doxysection{Open\+AIService Class Reference}
\hypertarget{classservices_1_1gpt__service_1_1_open_a_i_service}{}\label{classservices_1_1gpt__service_1_1_open_a_i_service}\index{OpenAIService@{OpenAIService}}


Inheritance diagram for Open\+AIService\+:
% FIG 0


Collaboration diagram for Open\+AIService\+:
% FIG 1
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classservices_1_1gpt__service_1_1_open_a_i_service_a94330cbe2648fc548c84dd4150df1294}{\+\_\+\+\_\+init\+\_\+\+\_\+}} (self, \mbox{\hyperlink{classservices_1_1call__details_1_1_call_context}{Call\+Context}} \mbox{\hyperlink{classservices_1_1gpt__service_1_1_abstract_l_l_m_service_a261f9f58ccbeaa962c4e675e4212c9cc}{context}})
\item 
\mbox{\hyperlink{classservices_1_1gpt__service_1_1_open_a_i_service_a8683968d4e3145b6c20b2c3cca00edde}{completion}} (self, str text, int interaction\+\_\+count, str role=\textquotesingle{}user\textquotesingle{}, str name=\textquotesingle{}user\textquotesingle{})
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classservices_1_1gpt__service_1_1_abstract_l_l_m_service}{Abstract\+LLMService}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classservices_1_1gpt__service_1_1_abstract_l_l_m_service_a7216638541d56b2229d92d53e68ec58d}{set\+\_\+call\+\_\+context}} (self, \mbox{\hyperlink{classservices_1_1call__details_1_1_call_context}{Call\+Context}} \mbox{\hyperlink{classservices_1_1gpt__service_1_1_abstract_l_l_m_service_a261f9f58ccbeaa962c4e675e4212c9cc}{context}})
\item 
\mbox{\hyperlink{classservices_1_1gpt__service_1_1_abstract_l_l_m_service_aecbc052233262275fc20a8ee8dfb8a47}{reset}} (self)
\item 
\mbox{\hyperlink{classservices_1_1gpt__service_1_1_abstract_l_l_m_service_a9ebe2dbe41c7c6d0f87f7ddd7e623f90}{validate\+\_\+function\+\_\+args}} (self, args)
\item 
\mbox{\hyperlink{classservices_1_1gpt__service_1_1_abstract_l_l_m_service_a0273afee408d6d770b3dfcac0adbf045}{split\+\_\+into\+\_\+sentences}} (self, text)
\item 
\mbox{\hyperlink{classservices_1_1gpt__service_1_1_abstract_l_l_m_service_a01682f7dddb2777b9499737564c132cf}{emit\+\_\+complete\+\_\+sentences}} (self, text, interaction\+\_\+count)
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler}{Event\+Handler}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_a504c5b2b70ced47ef9e67e57738a213c}{on}} (self, str event, Callable callback)
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_af0b13c52d513139510df47781cf94ab9}{create\+Event}} (self, str event, \texorpdfstring{$\ast$}{*}Any args, \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}Any kwargs)
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_aff0cd190f2fae5b016d4faf3c1c8e073}{on\+\_\+event}} (self, event)
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_ae941d8bdb10c17fe7bca834a1f24038a}{on\+\_\+text\+\_\+created}} (self, text)
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_a8cb3855bd5daa733879e2626db9ad227}{on\+\_\+text\+\_\+delta}} (self, delta, snapshot)
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_ad4402d96c3f2f5a5c2a53aebbf7b343d}{on\+\_\+text\+\_\+done}} (self, text)
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_a388bc733a67fc1ac664c79116b82a2c4}{on\+\_\+tool\+\_\+call\+\_\+created}} (self, tool\+\_\+call)
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_a12334a2e56f9b3c7be63a4128e71aeaa}{on\+\_\+tool\+\_\+call\+\_\+delta}} (self, delta, snapshot)
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_aae25b48c0a1a615b819caf177dd00a94}{on\+\_\+tool\+\_\+call\+\_\+done}} (self, tool\+\_\+call)
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_abeee6d6dac7e998703cc4c5e9d623075}{submit\+\_\+tool\+\_\+outputs}} (self, tool\+\_\+outputs)
\end{DoxyCompactItemize}
\doxysubsubsection*{Data Fields}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classservices_1_1gpt__service_1_1_open_a_i_service_a7ea94dfe4b4adb87b01c5ecfb01781ef}{openai}} = Async\+Open\+AI(api\+\_\+key=os.\+getenv("{}OPENAI\+\_\+\+API\+\_\+\+KEY"{}))
\item 
\mbox{\hyperlink{classservices_1_1gpt__service_1_1_open_a_i_service_a1d0403c1bae0049869594a30230c932d}{partial\+\_\+response\+\_\+index}}
\item 
str \mbox{\hyperlink{classservices_1_1gpt__service_1_1_open_a_i_service_a17cc21a98b55bbc913288439e57334ff}{sentence\+\_\+buffer}} = "{}"{}
\end{DoxyCompactItemize}
\doxysubsection*{Data Fields inherited from \mbox{\hyperlink{classservices_1_1gpt__service_1_1_abstract_l_l_m_service}{Abstract\+LLMService}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classservices_1_1gpt__service_1_1_abstract_l_l_m_service_a0cd0ea91f0087e9eec8e7cd3abf43dbd}{system\+\_\+message}} = context.\+system\+\_\+message
\item 
\mbox{\hyperlink{classservices_1_1gpt__service_1_1_abstract_l_l_m_service_aed6dd1341f109bf1914b47f3a5e35436}{initial\+\_\+message}} = context.\+initial\+\_\+message
\item 
\mbox{\hyperlink{classservices_1_1gpt__service_1_1_abstract_l_l_m_service_a261f9f58ccbeaa962c4e675e4212c9cc}{context}} = context
\item 
list \mbox{\hyperlink{classservices_1_1gpt__service_1_1_abstract_l_l_m_service_a61ad86d80ae0ff3617e8d3bfdd41bee6}{user\+\_\+context}}
\item 
int \mbox{\hyperlink{classservices_1_1gpt__service_1_1_abstract_l_l_m_service_a1d0403c1bae0049869594a30230c932d}{partial\+\_\+response\+\_\+index}} = 0
\item 
dict \mbox{\hyperlink{classservices_1_1gpt__service_1_1_abstract_l_l_m_service_a7e5cb5af7805001ab446024551471af4}{available\+\_\+functions}} = \{\}
\item 
str \mbox{\hyperlink{classservices_1_1gpt__service_1_1_abstract_l_l_m_service_a17cc21a98b55bbc913288439e57334ff}{sentence\+\_\+buffer}} = "{}"{}
\end{DoxyCompactItemize}
\doxysubsection*{Data Fields inherited from \mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler}{Event\+Handler}}}
\begin{DoxyCompactItemize}
\item 
list \mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_acb6617135b0fd32aae7e8bcd4491cf44}{\+\_\+events}} = \mbox{[}$\,$\mbox{]}
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_ad5bc32b75da65fe60067f501a4bb6665}{client}} = client
\end{DoxyCompactItemize}
\doxysubsubsection*{Additional Inherited Members}
\doxysubsection*{Protected Member Functions inherited from \mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler}{Event\+Handler}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_a142819f6f7c8639f2a664c46b80f337a}{\+\_\+run\+\_\+callback}} (self, Callable callback, \texorpdfstring{$\ast$}{*}Any args, \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}Any kwargs)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes inherited from \mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler}{Event\+Handler}}}
\begin{DoxyCompactItemize}
\item 
dict \mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_af82f490d6136d2e39721b932d274778f}{\+\_\+events}} = \{\}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}:class: OpenAIService

OpenAIService class is a subclass of AbstractLLMService. It provides methods for interacting with the OpenAI Chat API for generating responses based on user input.

Methods:
    __init__(self, context: CallContext)
        Initializes an instance of the OpenAIService class.

        Parameters:
            context (CallContext): The context for the service.

    async completion(self, text: str, interaction_count: int, role: str = 'user', name: str = 'user')
        Generates a completion response based on the given text using the OpenAI Chat API.

        Parameters:
            text (str): The user input text.
            interaction_count (int): The number of interactions with the API.
            role (str, optional): The role of the input. Default is 'user'.
            name (str, optional): The name of the role. Default is 'user'.
\end{DoxyVerb}
 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classservices_1_1gpt__service_1_1_open_a_i_service_a94330cbe2648fc548c84dd4150df1294}\index{OpenAIService@{OpenAIService}!\_\_init\_\_@{\_\_init\_\_}}
\index{\_\_init\_\_@{\_\_init\_\_}!OpenAIService@{OpenAIService}}
\doxysubsubsection{\texorpdfstring{\_\_init\_\_()}{\_\_init\_\_()}}
{\footnotesize\ttfamily \label{classservices_1_1gpt__service_1_1_open_a_i_service_a94330cbe2648fc548c84dd4150df1294} 
\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{\mbox{\hyperlink{classservices_1_1call__details_1_1_call_context}{Call\+Context}}}]{context}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Initializes an instance of the EventEmitter class.
\end{DoxyVerb}
 

Reimplemented from \mbox{\hyperlink{classservices_1_1gpt__service_1_1_abstract_l_l_m_service_a94330cbe2648fc548c84dd4150df1294}{Abstract\+LLMService}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00254\ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self,\ context:\ CallContext):}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ super().\_\_init\_\_(context)}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ self.openai\ =\ AsyncOpenAI(api\_key=os.getenv(\textcolor{stringliteral}{"{}OPENAI\_API\_KEY"{}}))}
\DoxyCodeLine{00257\ }

\end{DoxyCode}


References \mbox{\hyperlink{l00254}{Open\+AIService.\+\_\+\+\_\+init\+\_\+\+\_\+()}}.



Referenced by \mbox{\hyperlink{l00254}{Open\+AIService.\+\_\+\+\_\+init\+\_\+\+\_\+()}}.

Here is the call graph for this function\+:
% FIG 2
Here is the caller graph for this function\+:
% FIG 3


\doxysubsection{Member Function Documentation}
\Hypertarget{classservices_1_1gpt__service_1_1_open_a_i_service_a8683968d4e3145b6c20b2c3cca00edde}\index{OpenAIService@{OpenAIService}!completion@{completion}}
\index{completion@{completion}!OpenAIService@{OpenAIService}}
\doxysubsubsection{\texorpdfstring{completion()}{completion()}}
{\footnotesize\ttfamily \label{classservices_1_1gpt__service_1_1_open_a_i_service_a8683968d4e3145b6c20b2c3cca00edde} 
completion (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{str}]{text}{, }\item[{int}]{interaction\+\_\+count}{, }\item[{str }]{role}{ = {\ttfamily \textquotesingle{}user\textquotesingle{}}, }\item[{str }]{name}{ = {\ttfamily \textquotesingle{}user\textquotesingle{}}}\end{DoxyParamCaption})}



Reimplemented from \mbox{\hyperlink{classservices_1_1gpt__service_1_1_abstract_l_l_m_service_a8683968d4e3145b6c20b2c3cca00edde}{Abstract\+LLMService}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00258\ \ \ \ \ \textcolor{keyword}{async\ def\ }completion(self,\ text:\ str,\ interaction\_count:\ int,\ role:\ str\ =\ \textcolor{stringliteral}{'user'},\ name:\ str\ =\ \textcolor{stringliteral}{'user'}):}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ self.user\_context.append(\{\textcolor{stringliteral}{"{}role"{}}:\ role,\ \textcolor{stringliteral}{"{}content"{}}:\ text,\ \textcolor{stringliteral}{"{}name"{}}:\ name\})}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ messages\ =\ [\{\textcolor{stringliteral}{"{}role"{}}:\ \textcolor{stringliteral}{"{}system"{}},\ \textcolor{stringliteral}{"{}content"{}}:\ self.system\_message\}]\ +\ self.user\_context}
\DoxyCodeLine{00262\ }
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ stream\ =\ await\ self.openai.chat.completions.create(}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ model=\textcolor{stringliteral}{"{}gpt-\/4o"{}},}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ messages=messages,}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tools=tools,}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stream=\textcolor{keyword}{True},}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ complete\_response\ =\ \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ function\_name\ =\ \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ function\_args\ =\ \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{async}\ \textcolor{keywordflow}{for}\ chunk\ \textcolor{keywordflow}{in}\ stream:}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ delta\ =\ chunk.choices[0].delta}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ content\ =\ delta.content\ \textcolor{keywordflow}{or}\ \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tool\_calls\ =\ delta.tool\_calls}
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ tool\_calls:}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ tool\_call\ \textcolor{keywordflow}{in}\ tool\_calls:}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ tool\_call.function\ \textcolor{keywordflow}{and}\ tool\_call.function.name:}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ logger.info(f\textcolor{stringliteral}{"{}Function\ call\ detected:\ \{tool\_call.function.name\}"{}})}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ function\_name\ =\ tool\_call.function.name}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ function\_args\ +=\ tool\_call.function.arguments\ \textcolor{keywordflow}{or}\ \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ complete\_response\ +=\ content}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ await\ self.emit\_complete\_sentences(content,\ interaction\_count)}
\DoxyCodeLine{00288\ }
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ chunk.choices[0].finish\_reason\ ==\ \textcolor{stringliteral}{"{}tool\_calls"{}}:}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ logger.info(f\textcolor{stringliteral}{"{}Function\ call\ detected:\ \{function\_name\}"{}})}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ function\_to\_call\ =\ self.available\_functions[function\_name]}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ function\_args\ =\ self.validate\_function\_args(function\_args)}
\DoxyCodeLine{00293\ }
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tool\_data\ =\ next((tool\ \textcolor{keywordflow}{for}\ tool\ \textcolor{keywordflow}{in}\ tools\ \textcolor{keywordflow}{if}\ tool[\textcolor{stringliteral}{'function'}][\textcolor{stringliteral}{'name'}]\ ==\ function\_name),\ \textcolor{keywordtype}{None})}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ say\ =\ tool\_data[\textcolor{stringliteral}{'function'}][\textcolor{stringliteral}{'say'}]}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ await\ self.emit(\textcolor{stringliteral}{'llmreply'},\ \{}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}partialResponseIndex"{}}:\ \textcolor{keywordtype}{None},}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}partialResponse"{}}:\ say}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},\ interaction\_count)}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.user\_context.append(\{\textcolor{stringliteral}{"{}role"{}}:\ \textcolor{stringliteral}{"{}assistant"{}},\ \textcolor{stringliteral}{"{}content"{}}:\ say\})}
\DoxyCodeLine{00303\ }
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ function\_response\ =\ await\ function\_to\_call(self.context,\ function\_args)}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ logger.info(f\textcolor{stringliteral}{"{}Function\ \{function\_name\}\ called\ with\ args:\ \{function\_args\}"{}})}
\DoxyCodeLine{00307\ }
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ function\_name\ !=\ \textcolor{stringliteral}{"{}end\_call"{}}:}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ await\ self.completion(function\_response,\ interaction\_count,\ \textcolor{stringliteral}{'function'},\ function\_name)}
\DoxyCodeLine{00310\ }
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Emit\ any\ remaining\ content\ in\ the\ buffer}}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ self.sentence\_buffer.strip():}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ await\ self.emit(\textcolor{stringliteral}{'llmreply'},\ \{}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}partialResponseIndex"{}}:\ self.partial\_response\_index,}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}partialResponse"{}}:\ self.sentence\_buffer.strip()}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},\ interaction\_count)}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.sentence\_buffer\ =\ \textcolor{stringliteral}{"{}"{}}}
\DoxyCodeLine{00318\ }
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \ \ \ \ self.user\_context.append(\{\textcolor{stringliteral}{"{}role"{}}:\ \textcolor{stringliteral}{"{}assistant"{}},\ \textcolor{stringliteral}{"{}content"{}}:\ complete\_response\})}
\DoxyCodeLine{00320\ }
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ Exception\ \textcolor{keyword}{as}\ e:}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \ \ \ \ logger.error(f\textcolor{stringliteral}{"{}Error\ in\ OpenAIService\ completion:\ \{str(e)\}"{}})}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00324\ }

\end{DoxyCode}


References \mbox{\hyperlink{l00040}{Abstract\+LLMService.\+available\+\_\+functions}}, \mbox{\hyperlink{l00059}{Abstract\+LLMService.\+completion()}}, \mbox{\hyperlink{l00175}{Assistant\+Service.\+completion()}}, \mbox{\hyperlink{l00356}{Gemini\+Service.\+completion()}}, \mbox{\hyperlink{l00258}{Open\+AIService.\+completion()}}, \mbox{\hyperlink{l00034}{Abstract\+LLMService.\+context}}, \mbox{\hyperlink{l00020}{Test\+LLMServices.\+context}}, \mbox{\hyperlink{l00082}{Abstract\+LLMService.\+emit\+\_\+complete\+\_\+sentences()}}, \mbox{\hyperlink{l00157}{Assistant\+Service.\+openai}}, \mbox{\hyperlink{l00256}{Open\+AIService.\+openai}}, \mbox{\hyperlink{l00045}{Abstract\+LLMService.\+sentence\+\_\+buffer}}, \mbox{\hyperlink{l00317}{Open\+AIService.\+sentence\+\_\+buffer}}, \mbox{\hyperlink{l00014}{Call\+Context.\+system\+\_\+message}}, \mbox{\hyperlink{l00032}{Abstract\+LLMService.\+system\+\_\+message}}, \mbox{\hyperlink{l00013}{Call\+Context.\+user\+\_\+context}}, \mbox{\hyperlink{l00035}{Abstract\+LLMService.\+user\+\_\+context}}, and \mbox{\hyperlink{l00066}{Abstract\+LLMService.\+validate\+\_\+function\+\_\+args()}}.



Referenced by \mbox{\hyperlink{l00258}{Open\+AIService.\+completion()}}.

Here is the call graph for this function\+:
% FIG 4
Here is the caller graph for this function\+:
% FIG 5


\doxysubsection{Field Documentation}
\Hypertarget{classservices_1_1gpt__service_1_1_open_a_i_service_a7ea94dfe4b4adb87b01c5ecfb01781ef}\index{OpenAIService@{OpenAIService}!openai@{openai}}
\index{openai@{openai}!OpenAIService@{OpenAIService}}
\doxysubsubsection{\texorpdfstring{openai}{openai}}
{\footnotesize\ttfamily \label{classservices_1_1gpt__service_1_1_open_a_i_service_a7ea94dfe4b4adb87b01c5ecfb01781ef} 
openai = Async\+Open\+AI(api\+\_\+key=os.\+getenv("{}OPENAI\+\_\+\+API\+\_\+\+KEY"{}))}



Referenced by \mbox{\hyperlink{l00258}{Open\+AIService.\+completion()}}.

\Hypertarget{classservices_1_1gpt__service_1_1_open_a_i_service_a1d0403c1bae0049869594a30230c932d}\index{OpenAIService@{OpenAIService}!partial\_response\_index@{partial\_response\_index}}
\index{partial\_response\_index@{partial\_response\_index}!OpenAIService@{OpenAIService}}
\doxysubsubsection{\texorpdfstring{partial\_response\_index}{partial\_response\_index}}
{\footnotesize\ttfamily \label{classservices_1_1gpt__service_1_1_open_a_i_service_a1d0403c1bae0049869594a30230c932d} 
partial\+\_\+response\+\_\+index}



Referenced by \mbox{\hyperlink{l00082}{Abstract\+LLMService.\+emit\+\_\+complete\+\_\+sentences()}}, and \mbox{\hyperlink{l00062}{Abstract\+LLMService.\+reset()}}.

\Hypertarget{classservices_1_1gpt__service_1_1_open_a_i_service_a17cc21a98b55bbc913288439e57334ff}\index{OpenAIService@{OpenAIService}!sentence\_buffer@{sentence\_buffer}}
\index{sentence\_buffer@{sentence\_buffer}!OpenAIService@{OpenAIService}}
\doxysubsubsection{\texorpdfstring{sentence\_buffer}{sentence\_buffer}}
{\footnotesize\ttfamily \label{classservices_1_1gpt__service_1_1_open_a_i_service_a17cc21a98b55bbc913288439e57334ff} 
str sentence\+\_\+buffer = "{}"{}}



Referenced by \mbox{\hyperlink{l00258}{Open\+AIService.\+completion()}}, and \mbox{\hyperlink{l00082}{Abstract\+LLMService.\+emit\+\_\+complete\+\_\+sentences()}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/\+Users/seanbaker/\+Downloads/\+GPTPhone (2)/services/\mbox{\hyperlink{gpt__service_8py}{gpt\+\_\+service.\+py}}\end{DoxyCompactItemize}
