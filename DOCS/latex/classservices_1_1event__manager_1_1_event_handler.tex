\doxysection{Event\+Handler Class Reference}
\hypertarget{classservices_1_1event__manager_1_1_event_handler}{}\label{classservices_1_1event__manager_1_1_event_handler}\index{EventHandler@{EventHandler}}


Inheritance diagram for Event\+Handler\+:
% FIG 0


Collaboration diagram for Event\+Handler\+:
% FIG 1
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_abdd362d5f799ad16b5d6700efe590290}{\+\_\+\+\_\+init\+\_\+\+\_\+}} (self)
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_a504c5b2b70ced47ef9e67e57738a213c}{on}} (self, str event, Callable callback)
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_af0b13c52d513139510df47781cf94ab9}{create\+Event}} (self, str event, \texorpdfstring{$\ast$}{*}Any args, \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}Any kwargs)
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_a4788d2e4a3c281bdf2216d1bf4ddef8d}{\+\_\+\+\_\+init\+\_\+\+\_\+}} (self, \mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_ad5bc32b75da65fe60067f501a4bb6665}{client}})
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_aff0cd190f2fae5b016d4faf3c1c8e073}{on\+\_\+event}} (self, event)
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_ae941d8bdb10c17fe7bca834a1f24038a}{on\+\_\+text\+\_\+created}} (self, text)
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_a8cb3855bd5daa733879e2626db9ad227}{on\+\_\+text\+\_\+delta}} (self, delta, snapshot)
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_ad4402d96c3f2f5a5c2a53aebbf7b343d}{on\+\_\+text\+\_\+done}} (self, text)
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_a388bc733a67fc1ac664c79116b82a2c4}{on\+\_\+tool\+\_\+call\+\_\+created}} (self, tool\+\_\+call)
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_a12334a2e56f9b3c7be63a4128e71aeaa}{on\+\_\+tool\+\_\+call\+\_\+delta}} (self, delta, snapshot)
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_aae25b48c0a1a615b819caf177dd00a94}{on\+\_\+tool\+\_\+call\+\_\+done}} (self, tool\+\_\+call)
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_abeee6d6dac7e998703cc4c5e9d623075}{submit\+\_\+tool\+\_\+outputs}} (self, tool\+\_\+outputs)
\end{DoxyCompactItemize}
\doxysubsubsection*{Data Fields}
\begin{DoxyCompactItemize}
\item 
list \mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_acb6617135b0fd32aae7e8bcd4491cf44}{\+\_\+events}} = \mbox{[}$\,$\mbox{]}
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_ad5bc32b75da65fe60067f501a4bb6665}{client}} = client
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_a142819f6f7c8639f2a664c46b80f337a}{\+\_\+run\+\_\+callback}} (self, Callable callback, \texorpdfstring{$\ast$}{*}Any args, \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}Any kwargs)
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
dict \mbox{\hyperlink{classservices_1_1event__manager_1_1_event_handler_af82f490d6136d2e39721b932d274778f}{\+\_\+events}} = \{\}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}.. module:: event_handler
   :synopsis: This module contains the EventHandler class.

.. moduleauthor:: Your Name

.. autoclass:: EventHandler
   :members:
   :undoc-members:
   :show-inheritance:
   :private-members:
   :special-members:\end{DoxyVerb}


\begin{DoxyVerb}This class is an implementation of the AssistantEventHandler abstract class. It handles various events that occur during the execution of an Assistant.

:ivar client: The Assistant client used to interact with the Assistant API.
:type client: AssistantClient

Methods:
---------

__init__(self, client)
    Initializes a new instance of the EventHandler class.

    :param client: The Assistant client used to interact with the Assistant API.
    :type client: AssistantClient

on_event(self, event)
    This method is called when an event occurs. Subclasses should override this method to handle specific events.

    :param event: The event that occurred.
    :type event: Event

on_text_created(self, text)
    This method is called when a new text is created by the Assistant.

    :param text: The newly created text.
    :type text: str

on_text_delta(self, delta, snapshot)
    This method is called when a delta update is received for a text.

    :param delta: The delta update.
    :type delta: TextDelta
    :param snapshot: The current snapshot of the text.
    :type snapshot: TextSnapshot

on_text_done(self, text)
    This method is called when the Assistant has finished generating the final text.

    :param text: The final generated text.
    :type text: str

on_tool_call_created(self, tool_call)
    This method is called when a tool call is created by the Assistant.

    :param tool_call: The tool call that was created.
    :type tool_call: ToolCall

on_tool_call_delta(self, delta, snapshot)
    This method is called when a delta update is received for a tool call.

    :param delta: The delta update.
    :type delta: ToolCallDelta
    :param snapshot: The current snapshot of the tool call.
    :type snapshot: ToolCallSnapshot

on_tool_call_done(self, tool_call)
    This method is called when a tool call has completed.

    :param tool_call: The tool call that has completed.
    :type tool_call: ToolCall

submit_tool_outputs(self, tool_outputs)
    Submits the outputs of tool calls to the Assistant API.

    :param tool_outputs: The outputs of the tool calls.
    :type tool_outputs: List[dict]
\end{DoxyVerb}
 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classservices_1_1event__manager_1_1_event_handler_abdd362d5f799ad16b5d6700efe590290}\index{EventHandler@{EventHandler}!\_\_init\_\_@{\_\_init\_\_}}
\index{\_\_init\_\_@{\_\_init\_\_}!EventHandler@{EventHandler}}
\doxysubsubsection{\texorpdfstring{\_\_init\_\_()}{\_\_init\_\_()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classservices_1_1event__manager_1_1_event_handler_abdd362d5f799ad16b5d6700efe590290} 
\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Initializes an instance of the EventEmitter class.
\end{DoxyVerb}
 

Reimplemented in \mbox{\hyperlink{classservices_1_1gpt__service_1_1_abstract_l_l_m_service_a94330cbe2648fc548c84dd4150df1294}{Abstract\+LLMService}}, \mbox{\hyperlink{classservices_1_1gpt__service_1_1_assistant_service_a94330cbe2648fc548c84dd4150df1294}{Assistant\+Service}}, \mbox{\hyperlink{classservices_1_1gpt__service_1_1_gemini_service_a94330cbe2648fc548c84dd4150df1294}{Gemini\+Service}}, \mbox{\hyperlink{classservices_1_1gpt__service_1_1_open_a_i_service_a94330cbe2648fc548c84dd4150df1294}{Open\+AIService}}, \mbox{\hyperlink{classservices_1_1streaming__service_1_1_stream_service_ad5909077629a817a218b754ab926ee4c}{Stream\+Service}}, \mbox{\hyperlink{classservices_1_1stt__service_1_1_transcription_service_abdd362d5f799ad16b5d6700efe590290}{Transcription\+Service}}, \mbox{\hyperlink{classservices_1_1tts__service_1_1_deepgram_t_t_s_abdd362d5f799ad16b5d6700efe590290}{Deepgram\+TTS}}, and \mbox{\hyperlink{classservices_1_1tts__service_1_1_eleven_labs_t_t_s_abdd362d5f799ad16b5d6700efe590290}{Eleven\+Labs\+TTS}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self):}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00030\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Initializes\ an\ instance\ of\ the\ EventEmitter\ class.}}
\DoxyCodeLine{00031\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ self.\_events:\ Dict[str,\ List[Callable]]\ =\ \{\}}
\DoxyCodeLine{00033\ }

\end{DoxyCode}
\Hypertarget{classservices_1_1event__manager_1_1_event_handler_a4788d2e4a3c281bdf2216d1bf4ddef8d}\index{EventHandler@{EventHandler}!\_\_init\_\_@{\_\_init\_\_}}
\index{\_\_init\_\_@{\_\_init\_\_}!EventHandler@{EventHandler}}
\doxysubsubsection{\texorpdfstring{\_\_init\_\_()}{\_\_init\_\_()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classservices_1_1event__manager_1_1_event_handler_a4788d2e4a3c281bdf2216d1bf4ddef8d} 
\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{client}{}\end{DoxyParamCaption})}



Reimplemented in \mbox{\hyperlink{classservices_1_1gpt__service_1_1_abstract_l_l_m_service_a94330cbe2648fc548c84dd4150df1294}{Abstract\+LLMService}}, \mbox{\hyperlink{classservices_1_1gpt__service_1_1_assistant_service_a94330cbe2648fc548c84dd4150df1294}{Assistant\+Service}}, \mbox{\hyperlink{classservices_1_1gpt__service_1_1_gemini_service_a94330cbe2648fc548c84dd4150df1294}{Gemini\+Service}}, \mbox{\hyperlink{classservices_1_1gpt__service_1_1_open_a_i_service_a94330cbe2648fc548c84dd4150df1294}{Open\+AIService}}, \mbox{\hyperlink{classservices_1_1streaming__service_1_1_stream_service_ad5909077629a817a218b754ab926ee4c}{Stream\+Service}}, \mbox{\hyperlink{classservices_1_1stt__service_1_1_transcription_service_abdd362d5f799ad16b5d6700efe590290}{Transcription\+Service}}, \mbox{\hyperlink{classservices_1_1tts__service_1_1_deepgram_t_t_s_abdd362d5f799ad16b5d6700efe590290}{Deepgram\+TTS}}, and \mbox{\hyperlink{classservices_1_1tts__service_1_1_eleven_labs_t_t_s_abdd362d5f799ad16b5d6700efe590290}{Eleven\+Labs\+TTS}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keyword}{def\ }\_\_init\_\_(self,\ client):}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ self.client\ =\ client}
\DoxyCodeLine{00126\ }

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{classservices_1_1event__manager_1_1_event_handler_a142819f6f7c8639f2a664c46b80f337a}\index{EventHandler@{EventHandler}!\_run\_callback@{\_run\_callback}}
\index{\_run\_callback@{\_run\_callback}!EventHandler@{EventHandler}}
\doxysubsubsection{\texorpdfstring{\_run\_callback()}{\_run\_callback()}}
{\footnotesize\ttfamily \label{classservices_1_1event__manager_1_1_event_handler_a142819f6f7c8639f2a664c46b80f337a} 
\+\_\+run\+\_\+callback (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{Callable}]{callback}{, }\item[{\texorpdfstring{$\ast$}{*}Any}]{args}{, }\item[{\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}Any}]{kwargs}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keyword}{async\ def\ }\_run\_callback(self,\ callback:\ Callable,\ *args:\ Any,\ **kwargs:\ Any):}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ asyncio.iscoroutinefunction(callback):}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ await\ callback(*args,\ **kwargs)}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ callback(*args,\ **kwargs)}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ }

\end{DoxyCode}


Referenced by \mbox{\hyperlink{l00041}{Event\+Handler.\+create\+Event()}}.

Here is the caller graph for this function\+:
% FIG 2
\Hypertarget{classservices_1_1event__manager_1_1_event_handler_af0b13c52d513139510df47781cf94ab9}\index{EventHandler@{EventHandler}!createEvent@{createEvent}}
\index{createEvent@{createEvent}!EventHandler@{EventHandler}}
\doxysubsubsection{\texorpdfstring{createEvent()}{createEvent()}}
{\footnotesize\ttfamily \label{classservices_1_1event__manager_1_1_event_handler_af0b13c52d513139510df47781cf94ab9} 
create\+Event (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{str}]{event}{, }\item[{\texorpdfstring{$\ast$}{*}Any}]{args}{, }\item[{\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}Any}]{kwargs}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keyword}{async\ def\ }createEvent(self,\ event:\ str,\ *args:\ Any,\ **kwargs:\ Any):}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ event\ \textcolor{keywordflow}{in}\ self.\_events:}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ callback\ \textcolor{keywordflow}{in}\ self.\_events[event]:}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ await\ self.\_run\_callback(callback,\ *args,\ **kwargs)}
\DoxyCodeLine{00045\ }

\end{DoxyCode}


References \mbox{\hyperlink{l00032}{Event\+Handler.\+\_\+events}}, and \mbox{\hyperlink{l00047}{Event\+Handler.\+\_\+run\+\_\+callback()}}.



Referenced by \mbox{\hyperlink{l00082}{Abstract\+LLMService.\+emit\+\_\+complete\+\_\+sentences()}}, \mbox{\hyperlink{l00162}{Deepgram\+TTS.\+generate()}}, \mbox{\hyperlink{l00108}{Eleven\+Labs\+TTS.\+generate()}}, \mbox{\hyperlink{l00112}{Transcription\+Service.\+handle\+\_\+transcription()}}, \mbox{\hyperlink{l00090}{Transcription\+Service.\+handle\+\_\+utterance\+\_\+end()}}, and \mbox{\hyperlink{l00082}{Stream\+Service.\+send\+\_\+audio()}}.

Here is the call graph for this function\+:
% FIG 3
Here is the caller graph for this function\+:
% FIG 4
\Hypertarget{classservices_1_1event__manager_1_1_event_handler_a504c5b2b70ced47ef9e67e57738a213c}\index{EventHandler@{EventHandler}!on@{on}}
\index{on@{on}!EventHandler@{EventHandler}}
\doxysubsubsection{\texorpdfstring{on()}{on()}}
{\footnotesize\ttfamily \label{classservices_1_1event__manager_1_1_event_handler_a504c5b2b70ced47ef9e67e57738a213c} 
on (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{str}]{event}{, }\item[{Callable}]{callback}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keyword}{def\ }on(self,\ event:\ str,\ callback:\ Callable):}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ event\ \textcolor{keywordflow}{not}\ \textcolor{keywordflow}{in}\ self.\_events:}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ self.\_events[event]\ =\ []}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ self.\_events[event].append(callback)}
\DoxyCodeLine{00039\ }

\end{DoxyCode}
\Hypertarget{classservices_1_1event__manager_1_1_event_handler_aff0cd190f2fae5b016d4faf3c1c8e073}\index{EventHandler@{EventHandler}!on\_event@{on\_event}}
\index{on\_event@{on\_event}!EventHandler@{EventHandler}}
\doxysubsubsection{\texorpdfstring{on\_event()}{on\_event()}}
{\footnotesize\ttfamily \label{classservices_1_1event__manager_1_1_event_handler_aff0cd190f2fae5b016d4faf3c1c8e073} 
on\+\_\+event (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{event}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keyword}{def\ }on\_event(self,\ event):}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{00130\ }

\end{DoxyCode}
\Hypertarget{classservices_1_1event__manager_1_1_event_handler_ae941d8bdb10c17fe7bca834a1f24038a}\index{EventHandler@{EventHandler}!on\_text\_created@{on\_text\_created}}
\index{on\_text\_created@{on\_text\_created}!EventHandler@{EventHandler}}
\doxysubsubsection{\texorpdfstring{on\_text\_created()}{on\_text\_created()}}
{\footnotesize\ttfamily \label{classservices_1_1event__manager_1_1_event_handler_ae941d8bdb10c17fe7bca834a1f24038a} 
on\+\_\+text\+\_\+created (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{text}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00132\ \ \ \ \ \textcolor{keyword}{def\ }on\_text\_created(self,\ text):}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{"{}Assistant\ started\ generating\ text."{}})}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Logic\ to\ handle\ when\ the\ text\ is\ first\ created}}
\DoxyCodeLine{00135\ }

\end{DoxyCode}
\Hypertarget{classservices_1_1event__manager_1_1_event_handler_a8cb3855bd5daa733879e2626db9ad227}\index{EventHandler@{EventHandler}!on\_text\_delta@{on\_text\_delta}}
\index{on\_text\_delta@{on\_text\_delta}!EventHandler@{EventHandler}}
\doxysubsubsection{\texorpdfstring{on\_text\_delta()}{on\_text\_delta()}}
{\footnotesize\ttfamily \label{classservices_1_1event__manager_1_1_event_handler_a8cb3855bd5daa733879e2626db9ad227} 
on\+\_\+text\+\_\+delta (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{delta}{, }\item[{}]{snapshot}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{keyword}{def\ }on\_text\_delta(self,\ delta,\ snapshot):}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ snapshot.value:}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ text\_value\ =\ re.sub(}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{r"{}\(\backslash\)[(.*?)\(\backslash\)]\(\backslash\)s*\(\backslash\)(\(\backslash\)s*(.*?)\(\backslash\)s*\(\backslash\))"{}},\ \textcolor{stringliteral}{"{}Download\ Link"{}},\ snapshot.value}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ print(f\textcolor{stringliteral}{"{}Current\ message:\ \{text\_value\}"{}})}
\DoxyCodeLine{00143\ }

\end{DoxyCode}
\Hypertarget{classservices_1_1event__manager_1_1_event_handler_ad4402d96c3f2f5a5c2a53aebbf7b343d}\index{EventHandler@{EventHandler}!on\_text\_done@{on\_text\_done}}
\index{on\_text\_done@{on\_text\_done}!EventHandler@{EventHandler}}
\doxysubsubsection{\texorpdfstring{on\_text\_done()}{on\_text\_done()}}
{\footnotesize\ttfamily \label{classservices_1_1event__manager_1_1_event_handler_ad4402d96c3f2f5a5c2a53aebbf7b343d} 
on\+\_\+text\+\_\+done (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{text}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{keyword}{def\ }on\_text\_done(self,\ text):}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ format\_text\ =\ format\_annotation(self.client,\ text)}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ print(f\textcolor{stringliteral}{"{}Final\ message:\ \{format\_text\}"{}})}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Here\ you\ could\ store\ the\ final\ text,\ log\ it,\ etc.}}
\DoxyCodeLine{00149\ }

\end{DoxyCode}


References \mbox{\hyperlink{l00125}{Event\+Handler.\+client}}, \mbox{\hyperlink{l00158}{Assistant\+Service.\+client}}, \mbox{\hyperlink{l00042}{Transcription\+Service.\+client}}, and \mbox{\hyperlink{l00160}{Deepgram\+TTS.\+client}}.

\Hypertarget{classservices_1_1event__manager_1_1_event_handler_a388bc733a67fc1ac664c79116b82a2c4}\index{EventHandler@{EventHandler}!on\_tool\_call\_created@{on\_tool\_call\_created}}
\index{on\_tool\_call\_created@{on\_tool\_call\_created}!EventHandler@{EventHandler}}
\doxysubsubsection{\texorpdfstring{on\_tool\_call\_created()}{on\_tool\_call\_created()}}
{\footnotesize\ttfamily \label{classservices_1_1event__manager_1_1_event_handler_a388bc733a67fc1ac664c79116b82a2c4} 
on\+\_\+tool\+\_\+call\+\_\+created (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{tool\+\_\+call}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{keyword}{def\ }on\_tool\_call\_created(self,\ tool\_call):}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ tool\_call.type\ ==\ \textcolor{stringliteral}{"{}code\_interpreter"{}}:}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{"{}Code\ Interpreter\ tool\ is\ being\ called."{}})}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Logic\ to\ handle\ when\ a\ tool\ call\ is\ created}}
\DoxyCodeLine{00155\ }

\end{DoxyCode}
\Hypertarget{classservices_1_1event__manager_1_1_event_handler_a12334a2e56f9b3c7be63a4128e71aeaa}\index{EventHandler@{EventHandler}!on\_tool\_call\_delta@{on\_tool\_call\_delta}}
\index{on\_tool\_call\_delta@{on\_tool\_call\_delta}!EventHandler@{EventHandler}}
\doxysubsubsection{\texorpdfstring{on\_tool\_call\_delta()}{on\_tool\_call\_delta()}}
{\footnotesize\ttfamily \label{classservices_1_1event__manager_1_1_event_handler_a12334a2e56f9b3c7be63a4128e71aeaa} 
on\+\_\+tool\+\_\+call\+\_\+delta (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{delta}{, }\item[{}]{snapshot}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{keyword}{def\ }on\_tool\_call\_delta(self,\ delta,\ snapshot):}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ delta.type\ ==\ \textcolor{stringliteral}{"{}code\_interpreter"{}}:}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ delta.code\_interpreter.input:}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ input\_code\ =\ delta.code\_interpreter.input}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ print(f\textcolor{stringliteral}{"{}Code\ Interpreter\ input:\(\backslash\)n\{input\_code\}"{}})}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ delta.code\_interpreter.outputs:}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ output\ \textcolor{keywordflow}{in}\ delta.code\_interpreter.outputs:}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ output.type\ ==\ \textcolor{stringliteral}{"{}logs"{}}:}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ print(f\textcolor{stringliteral}{"{}Code\ Interpreter\ output\ logs:\(\backslash\)n\{output.logs\}"{}})}
\DoxyCodeLine{00167\ }

\end{DoxyCode}
\Hypertarget{classservices_1_1event__manager_1_1_event_handler_aae25b48c0a1a615b819caf177dd00a94}\index{EventHandler@{EventHandler}!on\_tool\_call\_done@{on\_tool\_call\_done}}
\index{on\_tool\_call\_done@{on\_tool\_call\_done}!EventHandler@{EventHandler}}
\doxysubsubsection{\texorpdfstring{on\_tool\_call\_done()}{on\_tool\_call\_done()}}
{\footnotesize\ttfamily \label{classservices_1_1event__manager_1_1_event_handler_aae25b48c0a1a615b819caf177dd00a94} 
on\+\_\+tool\+\_\+call\+\_\+done (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{tool\+\_\+call}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keyword}{def\ }on\_tool\_call\_done(self,\ tool\_call):}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ print(f\textcolor{stringliteral}{"{}Tool\ call\ \{tool\_call.type\}\ completed."{}})}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ tool\_call.type\ ==\ \textcolor{stringliteral}{"{}code\_interpreter"{}}:}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ input\_code\ =\ f\textcolor{stringliteral}{"{}Input\ code:\(\backslash\)n\{tool\_call.code\_interpreter.input\}"{}}}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ print(input\_code)}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ output\ \textcolor{keywordflow}{in}\ tool\_call.code\_interpreter.outputs:}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ output.type\ ==\ \textcolor{stringliteral}{"{}logs"{}}:}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ print(f\textcolor{stringliteral}{"{}Code\ Interpreter\ output:\(\backslash\)n\{output.logs\}"{}})}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{elif}\ tool\_call.type\ ==\ \textcolor{stringliteral}{"{}function"{}}:}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ print(f\textcolor{stringliteral}{"{}Function\ \{tool\_call.function.name\}\ called."{}})}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ tool\_calls\ =\ self.current\_run.required\_action.submit\_tool\_outputs.tool\_calls}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ tool\_outputs\ =\ []}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ submit\_tool\_call\ \textcolor{keywordflow}{in}\ tool\_calls:}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tool\_function\_name\ =\ submit\_tool\_call.function.name}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tool\_function\_arguments\ =\ json.loads(submit\_tool\_call.function.arguments)}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tool\_function\_output\ =\ TOOL\_MAP[tool\_function\_name](}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ **tool\_function\_arguments}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tool\_outputs.append(}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}tool\_call\_id"{}}:\ submit\_tool\_call.id,}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}output"{}}:\ tool\_function\_output,}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ self.submit\_tool\_outputs(tool\_outputs)}
\DoxyCodeLine{00195\ }

\end{DoxyCode}


References \mbox{\hyperlink{l00196}{Event\+Handler.\+submit\+\_\+tool\+\_\+outputs()}}.

Here is the call graph for this function\+:
% FIG 5
\Hypertarget{classservices_1_1event__manager_1_1_event_handler_abeee6d6dac7e998703cc4c5e9d623075}\index{EventHandler@{EventHandler}!submit\_tool\_outputs@{submit\_tool\_outputs}}
\index{submit\_tool\_outputs@{submit\_tool\_outputs}!EventHandler@{EventHandler}}
\doxysubsubsection{\texorpdfstring{submit\_tool\_outputs()}{submit\_tool\_outputs()}}
{\footnotesize\ttfamily \label{classservices_1_1event__manager_1_1_event_handler_abeee6d6dac7e998703cc4c5e9d623075} 
submit\+\_\+tool\+\_\+outputs (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{tool\+\_\+outputs}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{keyword}{def\ }submit\_tool\_outputs(self,\ tool\_outputs):}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \textcolor{keyword}{with}\ self.client.beta.threads.runs.submit\_tool\_outputs\_stream(}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ thread\_id=self.thread\_id,}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ run\_id=self.current\_run.id,}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ tool\_outputs=tool\_outputs,}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ event\_handler=self,}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ )\ \textcolor{keyword}{as}\ stream:}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \ \ \ stream.until\_done()}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00205\ }

\end{DoxyCode}


References \mbox{\hyperlink{l00125}{Event\+Handler.\+client}}, \mbox{\hyperlink{l00158}{Assistant\+Service.\+client}}, \mbox{\hyperlink{l00042}{Transcription\+Service.\+client}}, and \mbox{\hyperlink{l00160}{Deepgram\+TTS.\+client}}.



Referenced by \mbox{\hyperlink{l00169}{Event\+Handler.\+on\+\_\+tool\+\_\+call\+\_\+done()}}.

Here is the caller graph for this function\+:
% FIG 6


\doxysubsection{Field Documentation}
\Hypertarget{classservices_1_1event__manager_1_1_event_handler_af82f490d6136d2e39721b932d274778f}\index{EventHandler@{EventHandler}!\_events@{\_events}}
\index{\_events@{\_events}!EventHandler@{EventHandler}}
\doxysubsubsection{\texorpdfstring{\_events}{\_events}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{classservices_1_1event__manager_1_1_event_handler_af82f490d6136d2e39721b932d274778f} 
dict \+\_\+events = \{\}\hspace{0.3cm}{\ttfamily [protected]}}



Referenced by \mbox{\hyperlink{l00041}{Event\+Handler.\+create\+Event()}}.

\Hypertarget{classservices_1_1event__manager_1_1_event_handler_acb6617135b0fd32aae7e8bcd4491cf44}\index{EventHandler@{EventHandler}!\_events@{\_events}}
\index{\_events@{\_events}!EventHandler@{EventHandler}}
\doxysubsubsection{\texorpdfstring{\_events}{\_events}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{classservices_1_1event__manager_1_1_event_handler_acb6617135b0fd32aae7e8bcd4491cf44} 
list \+\_\+events = \mbox{[}$\,$\mbox{]}}



Referenced by \mbox{\hyperlink{l00041}{Event\+Handler.\+create\+Event()}}.

\Hypertarget{classservices_1_1event__manager_1_1_event_handler_ad5bc32b75da65fe60067f501a4bb6665}\index{EventHandler@{EventHandler}!client@{client}}
\index{client@{client}!EventHandler@{EventHandler}}
\doxysubsubsection{\texorpdfstring{client}{client}}
{\footnotesize\ttfamily \label{classservices_1_1event__manager_1_1_event_handler_ad5bc32b75da65fe60067f501a4bb6665} 
client = client}



Referenced by \mbox{\hyperlink{l00175}{Assistant\+Service.\+completion()}}, \mbox{\hyperlink{l00162}{Deepgram\+TTS.\+generate()}}, \mbox{\hyperlink{l00203}{Assistant\+Service.\+handle\+\_\+streaming\+\_\+response()}}, \mbox{\hyperlink{l00145}{Event\+Handler.\+on\+\_\+text\+\_\+done()}}, and \mbox{\hyperlink{l00196}{Event\+Handler.\+submit\+\_\+tool\+\_\+outputs()}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/\+Users/seanbaker/\+Downloads/\+GPTPhone (2)/services/\mbox{\hyperlink{event__manager_8py}{event\+\_\+manager.\+py}}\end{DoxyCompactItemize}
