\doxysection{end\+\_\+call Namespace Reference}
\hypertarget{namespaceend__call}{}\label{namespaceend__call}\index{end\_call@{end\_call}}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespaceend__call_ac994ebcb510a1f26d49b4cf5ef7842f1}{end\+\_\+call}} (context, args)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\Hypertarget{namespaceend__call_ac994ebcb510a1f26d49b4cf5ef7842f1}\index{end\_call@{end\_call}!end\_call@{end\_call}}
\index{end\_call@{end\_call}!end\_call@{end\_call}}
\doxysubsubsection{\texorpdfstring{end\_call()}{end\_call()}}
{\footnotesize\ttfamily \label{namespaceend__call_ac994ebcb510a1f26d49b4cf5ef7842f1} 
end\+\_\+call (\begin{DoxyParamCaption}\item[{}]{context}{, }\item[{}]{args}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00009\ \textcolor{keyword}{async\ def\ }\mbox{\hyperlink{namespaceend__call}{end\_call}}(context,\ args):}
\DoxyCodeLine{00010\ \ \ \ \ \textcolor{comment}{\#\ Retrieve\ the\ Twilio\ credentials\ from\ environment\ variables}}
\DoxyCodeLine{00011\ \ \ \ \ account\_sid\ =\ os.environ[\textcolor{stringliteral}{'TWILIO\_ACCOUNT\_SID'}]}
\DoxyCodeLine{00012\ \ \ \ \ auth\_token\ =\ os.environ[\textcolor{stringliteral}{'TWILIO\_AUTH\_TOKEN'}]}
\DoxyCodeLine{00013\ \ \ \ \ client\ =\ Client(account\_sid,\ auth\_token)}
\DoxyCodeLine{00014\ \ \ \ \ call\_sid\ =\ context.call\_sid}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{comment}{\#\ Fetch\ the\ call}}
\DoxyCodeLine{00017\ \ \ \ \ call\ =\ client.calls(call\_sid).fetch()}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{comment}{\#\ Check\ if\ the\ call\ is\ already\ completed}}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{keywordflow}{if}\ call.status\ \textcolor{keywordflow}{in}\ [\textcolor{stringliteral}{'completed'},\ \textcolor{stringliteral}{'failed'},\ \textcolor{stringliteral}{'busy'},\ \textcolor{stringliteral}{'no-\/answer'},\ \textcolor{stringliteral}{'canceled'}]:}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ f\textcolor{stringliteral}{"{}Call\ already\ ended\ with\ status:\ \{call.status\}"{}}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{comment}{\#\ Wait\ for\ 5\ seconds\ before\ ending\ the\ call\ to\ ensure\ the\ goodbye\ goes\ through}}
\DoxyCodeLine{00024\ \ \ \ \ await\ asyncio.sleep(5)}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{comment}{\#\ End\ the\ call}}
\DoxyCodeLine{00027\ \ \ \ \ call\ =\ client.calls(call\_sid).update(status=\textcolor{stringliteral}{'completed'})}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keywordflow}{return}\ f\textcolor{stringliteral}{"{}Call\ ended\ successfully.\ Final\ status:\ \{call.status\}}}

\end{DoxyCode}
