\doxysection{Test\+LLMServices Class Reference}
\hypertarget{classunittests_1_1testgpt__service_1_1_test_l_l_m_services}{}\label{classunittests_1_1testgpt__service_1_1_test_l_l_m_services}\index{TestLLMServices@{TestLLMServices}}


Inheritance diagram for Test\+LLMServices\+:
% FIG 0


Collaboration diagram for Test\+LLMServices\+:
% FIG 1
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classunittests_1_1testgpt__service_1_1_test_l_l_m_services_ac86c73ff4bb09de46d20296fcbcbd1af}{set\+Up\+Class}} (cls)
\item 
\mbox{\hyperlink{classunittests_1_1testgpt__service_1_1_test_l_l_m_services_a8265f43e817bd81e8ee0479d9cf942f1}{set\+Up}} (self)
\item 
\mbox{\hyperlink{classunittests_1_1testgpt__service_1_1_test_l_l_m_services_a9c3db33205f58853ae3878ed76a84e10}{test\+\_\+assistant\+\_\+service\+\_\+completion}} (self, mock\+\_\+openai)
\item 
\mbox{\hyperlink{classunittests_1_1testgpt__service_1_1_test_l_l_m_services_a0db5f9a87fe4e8b5ec20449f31bbe326}{test\+\_\+emit\+\_\+complete\+\_\+sentences}} (self, mock\+\_\+create\+\_\+event)
\item 
\mbox{\hyperlink{classunittests_1_1testgpt__service_1_1_test_l_l_m_services_a8f5701adb3ab0c81fdf7e2b5b976979c}{test\+\_\+abstract\+\_\+llm\+\_\+service\+\_\+methods}} (self)
\end{DoxyCompactItemize}
\doxysubsubsection*{Data Fields}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classunittests_1_1testgpt__service_1_1_test_l_l_m_services_a261f9f58ccbeaa962c4e675e4212c9cc}{context}} = \mbox{\hyperlink{classservices_1_1call__details_1_1_call_context}{Call\+Context}}()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


\doxysubsection{Member Function Documentation}
\Hypertarget{classunittests_1_1testgpt__service_1_1_test_l_l_m_services_a8265f43e817bd81e8ee0479d9cf942f1}\index{TestLLMServices@{TestLLMServices}!setUp@{setUp}}
\index{setUp@{setUp}!TestLLMServices@{TestLLMServices}}
\doxysubsubsection{\texorpdfstring{setUp()}{setUp()}}
{\footnotesize\ttfamily \label{classunittests_1_1testgpt__service_1_1_test_l_l_m_services_a8265f43e817bd81e8ee0479d9cf942f1} 
set\+Up (\begin{DoxyParamCaption}\item[{}]{self}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{keyword}{def\ }setUp(self):}
\DoxyCodeLine{00020\ \ \ \ \ \ \ \ \ self.context\ =\ CallContext()}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ self.context.system\_message\ =\ \textcolor{stringliteral}{"{}You\ are\ a\ helpful\ assistant."{}}}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \ \ self.context.initial\_message\ =\ \textcolor{stringliteral}{"{}Hello!\ How\ can\ I\ help\ you\ today?"{}}}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ os.environ[\textcolor{stringliteral}{"{}OPENAI\_API\_KEY"{}}]\ =\ \textcolor{stringliteral}{"{}your-\/openai-\/api-\/key"{}}}

\end{DoxyCode}
\Hypertarget{classunittests_1_1testgpt__service_1_1_test_l_l_m_services_ac86c73ff4bb09de46d20296fcbcbd1af}\index{TestLLMServices@{TestLLMServices}!setUpClass@{setUpClass}}
\index{setUpClass@{setUpClass}!TestLLMServices@{TestLLMServices}}
\doxysubsubsection{\texorpdfstring{setUpClass()}{setUpClass()}}
{\footnotesize\ttfamily \label{classunittests_1_1testgpt__service_1_1_test_l_l_m_services_ac86c73ff4bb09de46d20296fcbcbd1af} 
set\+Up\+Class (\begin{DoxyParamCaption}\item[{}]{cls}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{keyword}{def\ }setUpClass(cls):}
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ load\_dotenv()}
\DoxyCodeLine{00018\ }

\end{DoxyCode}
\Hypertarget{classunittests_1_1testgpt__service_1_1_test_l_l_m_services_a8f5701adb3ab0c81fdf7e2b5b976979c}\index{TestLLMServices@{TestLLMServices}!test\_abstract\_llm\_service\_methods@{test\_abstract\_llm\_service\_methods}}
\index{test\_abstract\_llm\_service\_methods@{test\_abstract\_llm\_service\_methods}!TestLLMServices@{TestLLMServices}}
\doxysubsubsection{\texorpdfstring{test\_abstract\_llm\_service\_methods()}{test\_abstract\_llm\_service\_methods()}}
{\footnotesize\ttfamily \label{classunittests_1_1testgpt__service_1_1_test_l_l_m_services_a8f5701adb3ab0c81fdf7e2b5b976979c} 
test\+\_\+abstract\+\_\+llm\+\_\+service\+\_\+methods (\begin{DoxyParamCaption}\item[{}]{self}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keyword}{def\ }test\_abstract\_llm\_service\_methods(self):}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Create\ a\ dummy\ subclass\ to\ test\ AbstractLLMService\ methods}}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }DummyService(AbstractLLMService):}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{async\ def\ }completion(self,\ text:\ str,\ interaction\_count:\ int,\ role:\ str\ =\ \textcolor{stringliteral}{'user'},\ name:\ str\ =\ \textcolor{stringliteral}{'user'}):}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ service\ =\ DummyService(self.context)}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ the\ validate\_function\_args\ method}}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ valid\_args\ =\ \textcolor{stringliteral}{'\{"{}key"{}:\ "{}value"{}\}'}}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ invalid\_args\ =\ \textcolor{stringliteral}{'\{"{}key"{}:\ value\}'}\ \ \textcolor{comment}{\#\ Missing\ quotes\ around\ value}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ self.assertEqual(service.validate\_function\_args(valid\_args),\ \{\textcolor{stringliteral}{"{}key"{}}:\ \textcolor{stringliteral}{"{}value"{}}\})}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ self.assertEqual(service.validate\_function\_args(invalid\_args),\ \{\})}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ the\ split\_into\_sentences\ method}}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ text\ =\ \textcolor{stringliteral}{"{}Hello!\ How\ are\ you?\ I'm\ fine."{}}}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ sentences\ =\ service.split\_into\_sentences(text)}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ self.assertEqual(sentences,\ [\textcolor{stringliteral}{"{}Hello!"{}},\ \textcolor{stringliteral}{"{}\ How\ are\ you?"{}},\ \textcolor{stringliteral}{"{}\ I'm\ fine."{}},\textcolor{stringliteral}{''}])}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ }

\end{DoxyCode}


References \mbox{\hyperlink{l00034}{Abstract\+LLMService.\+context}}, and \mbox{\hyperlink{l00020}{Test\+LLMServices.\+context}}.

\Hypertarget{classunittests_1_1testgpt__service_1_1_test_l_l_m_services_a9c3db33205f58853ae3878ed76a84e10}\index{TestLLMServices@{TestLLMServices}!test\_assistant\_service\_completion@{test\_assistant\_service\_completion}}
\index{test\_assistant\_service\_completion@{test\_assistant\_service\_completion}!TestLLMServices@{TestLLMServices}}
\doxysubsubsection{\texorpdfstring{test\_assistant\_service\_completion()}{test\_assistant\_service\_completion()}}
{\footnotesize\ttfamily \label{classunittests_1_1testgpt__service_1_1_test_l_l_m_services_a9c3db33205f58853ae3878ed76a84e10} 
test\+\_\+assistant\+\_\+service\+\_\+completion (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{mock\+\_\+openai}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{keyword}{async\ def\ }test\_assistant\_service\_completion(self,\ mock\_openai):}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Mock\ the\ OpenAI\ client\ and\ its\ methods}}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ mock\_client\ =\ MagicMock()}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ mock\_openai.return\_value\ =\ mock\_client}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ service\ =\ AssistantService(self.context)}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Set\ up\ mocks\ for\ thread\ creation\ and\ message\ submission}}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ mock\_thread\ =\ MagicMock()}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ mock\_run\ =\ MagicMock()}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ mock\_messages\ =\ MagicMock()}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ mock\_client.beta.threads.create.return\_value\ =\ mock\_thread}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ mock\_client.beta.threads.messages.create.return\_value\ =\ \textcolor{keywordtype}{None}}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ mock\_client.beta.threads.runs.create.return\_value\ =\ mock\_run}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ mock\_client.beta.threads.runs.retrieve.side\_effect\ =\ [mock\_run,\ mock\_run]\ \ \textcolor{comment}{\#\ Simulate\ run\ status\ changes}}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ mock\_client.beta.threads.messages.list.return\_value\ =\ mock\_messages}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Simulate\ the\ interaction}}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ text\ =\ \textcolor{stringliteral}{"{}What\ is\ 2\ +\ 2?"{}}}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ interaction\_count\ =\ 1}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ await\ service.completion(text,\ interaction\_count)}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Assertions\ to\ ensure\ the\ expected\ flow\ occurred}}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ mock\_client.beta.threads.create.assert\_called\_once()}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ mock\_client.beta.threads.messages.create.assert\_called\_once\_with(}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ thread\_id=mock\_thread.id,\ role=\textcolor{stringliteral}{"{}user"{}},\ content=text}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ mock\_client.beta.threads.runs.create.assert\_called\_once\_with(}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ thread\_id=mock\_thread.id,\ assistant\_id=service.assistant\_id}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ )}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ mock\_client.beta.threads.messages.list.assert\_called\_once\_with(}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ thread\_id=mock\_thread.id,\ order=\textcolor{stringliteral}{"{}asc"{}}}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ )}

\end{DoxyCode}


References \mbox{\hyperlink{l00034}{Abstract\+LLMService.\+context}}, and \mbox{\hyperlink{l00020}{Test\+LLMServices.\+context}}.

\Hypertarget{classunittests_1_1testgpt__service_1_1_test_l_l_m_services_a0db5f9a87fe4e8b5ec20449f31bbe326}\index{TestLLMServices@{TestLLMServices}!test\_emit\_complete\_sentences@{test\_emit\_complete\_sentences}}
\index{test\_emit\_complete\_sentences@{test\_emit\_complete\_sentences}!TestLLMServices@{TestLLMServices}}
\doxysubsubsection{\texorpdfstring{test\_emit\_complete\_sentences()}{test\_emit\_complete\_sentences()}}
{\footnotesize\ttfamily \label{classunittests_1_1testgpt__service_1_1_test_l_l_m_services_a0db5f9a87fe4e8b5ec20449f31bbe326} 
test\+\_\+emit\+\_\+complete\+\_\+sentences (\begin{DoxyParamCaption}\item[{}]{self}{, }\item[{}]{mock\+\_\+create\+\_\+event}{}\end{DoxyParamCaption})}


\begin{DoxyCode}{0}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keyword}{async\ def\ }test\_emit\_complete\_sentences(self,\ mock\_create\_event):}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Test\ emit\_complete\_sentences}}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }DummyService(AbstractLLMService):}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{async\ def\ }completion(self,\ text:\ str,\ interaction\_count:\ int,\ role:\ str\ =\ \textcolor{stringliteral}{'user'},\ name:\ str\ =\ \textcolor{stringliteral}{'user'}):}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{pass}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ service\ =\ DummyService(self.context)}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ await\ service.emit\_complete\_sentences(\textcolor{stringliteral}{"{}Hello\ world."{}},\ 1)}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ mock\_create\_event.assert\_called()}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ }

\end{DoxyCode}


References \mbox{\hyperlink{l00034}{Abstract\+LLMService.\+context}}, and \mbox{\hyperlink{l00020}{Test\+LLMServices.\+context}}.



\doxysubsection{Field Documentation}
\Hypertarget{classunittests_1_1testgpt__service_1_1_test_l_l_m_services_a261f9f58ccbeaa962c4e675e4212c9cc}\index{TestLLMServices@{TestLLMServices}!context@{context}}
\index{context@{context}!TestLLMServices@{TestLLMServices}}
\doxysubsubsection{\texorpdfstring{context}{context}}
{\footnotesize\ttfamily \label{classunittests_1_1testgpt__service_1_1_test_l_l_m_services_a261f9f58ccbeaa962c4e675e4212c9cc} 
context = \mbox{\hyperlink{classservices_1_1call__details_1_1_call_context}{Call\+Context}}()}



Referenced by \mbox{\hyperlink{l00258}{Open\+AIService.\+completion()}}, \mbox{\hyperlink{l00048}{Abstract\+LLMService.\+set\+\_\+call\+\_\+context()}}, \mbox{\hyperlink{l00076}{Test\+LLMServices.\+test\+\_\+abstract\+\_\+llm\+\_\+service\+\_\+methods()}}, \mbox{\hyperlink{l00026}{Test\+LLMServices.\+test\+\_\+assistant\+\_\+service\+\_\+completion()}}, and \mbox{\hyperlink{l00063}{Test\+LLMServices.\+test\+\_\+emit\+\_\+complete\+\_\+sentences()}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/\+Users/seanbaker/\+Downloads/\+GPTPhone (2)/unittests/\mbox{\hyperlink{testgpt__service_8py}{testgpt\+\_\+service.\+py}}\end{DoxyCompactItemize}
