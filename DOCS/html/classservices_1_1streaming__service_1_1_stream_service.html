<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GPTPHONE: StreamService Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">GPTPHONE
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classservices_1_1streaming__service_1_1_stream_service.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle"><div class="title">StreamService Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for StreamService:</div>
<div class="dyncontent">
<div class="center"><img src="classservices_1_1streaming__service_1_1_stream_service__inherit__graph.png" border="0" usemap="#a_stream_service_inherit__map" alt="Inheritance graph"/></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for StreamService:</div>
<div class="dyncontent">
<div class="center"><img src="classservices_1_1streaming__service_1_1_stream_service__coll__graph.png" border="0" usemap="#a_stream_service_coll__map" alt="Collaboration graph"/></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad5909077629a817a218b754ab926ee4c" id="r_ad5909077629a817a218b754ab926ee4c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad5909077629a817a218b754ab926ee4c">__init__</a> (self, WebSocket websocket)</td></tr>
<tr class="separator:ad5909077629a817a218b754ab926ee4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff5f4cd092d5d265074e1d53820dec3f" id="r_aff5f4cd092d5d265074e1d53820dec3f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aff5f4cd092d5d265074e1d53820dec3f">set_stream_sid</a> (self, str <a class="el" href="#a0801efceae9d17f258da30f0ec261c38">stream_sid</a>)</td></tr>
<tr class="separator:aff5f4cd092d5d265074e1d53820dec3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaa8d74a6e33fc783a991ee3945dafc1" id="r_abaa8d74a6e33fc783a991ee3945dafc1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abaa8d74a6e33fc783a991ee3945dafc1">buffer</a> (self, int index, str audio)</td></tr>
<tr class="separator:abaa8d74a6e33fc783a991ee3945dafc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecbc052233262275fc20a8ee8dfb8a47" id="r_aecbc052233262275fc20a8ee8dfb8a47"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aecbc052233262275fc20a8ee8dfb8a47">reset</a> (self)</td></tr>
<tr class="separator:aecbc052233262275fc20a8ee8dfb8a47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a038b22e1ed6a22ab7779e7ea254513fd" id="r_a038b22e1ed6a22ab7779e7ea254513fd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a038b22e1ed6a22ab7779e7ea254513fd">send_audio</a> (self, str audio)</td></tr>
<tr class="separator:a038b22e1ed6a22ab7779e7ea254513fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classservices_1_1event__manager_1_1_event_handler"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_methods_classservices_1_1event__manager_1_1_event_handler')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classservices_1_1event__manager_1_1_event_handler.html">EventHandler</a></td></tr>
<tr class="memitem:a504c5b2b70ced47ef9e67e57738a213c inherit pub_methods_classservices_1_1event__manager_1_1_event_handler" id="r_a504c5b2b70ced47ef9e67e57738a213c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classservices_1_1event__manager_1_1_event_handler.html#a504c5b2b70ced47ef9e67e57738a213c">on</a> (self, str event, Callable callback)</td></tr>
<tr class="separator:a504c5b2b70ced47ef9e67e57738a213c inherit pub_methods_classservices_1_1event__manager_1_1_event_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0b13c52d513139510df47781cf94ab9 inherit pub_methods_classservices_1_1event__manager_1_1_event_handler" id="r_af0b13c52d513139510df47781cf94ab9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classservices_1_1event__manager_1_1_event_handler.html#af0b13c52d513139510df47781cf94ab9">createEvent</a> (self, str event, *Any args, **Any kwargs)</td></tr>
<tr class="separator:af0b13c52d513139510df47781cf94ab9 inherit pub_methods_classservices_1_1event__manager_1_1_event_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff0cd190f2fae5b016d4faf3c1c8e073 inherit pub_methods_classservices_1_1event__manager_1_1_event_handler" id="r_aff0cd190f2fae5b016d4faf3c1c8e073"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classservices_1_1event__manager_1_1_event_handler.html#aff0cd190f2fae5b016d4faf3c1c8e073">on_event</a> (self, event)</td></tr>
<tr class="separator:aff0cd190f2fae5b016d4faf3c1c8e073 inherit pub_methods_classservices_1_1event__manager_1_1_event_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae941d8bdb10c17fe7bca834a1f24038a inherit pub_methods_classservices_1_1event__manager_1_1_event_handler" id="r_ae941d8bdb10c17fe7bca834a1f24038a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classservices_1_1event__manager_1_1_event_handler.html#ae941d8bdb10c17fe7bca834a1f24038a">on_text_created</a> (self, text)</td></tr>
<tr class="separator:ae941d8bdb10c17fe7bca834a1f24038a inherit pub_methods_classservices_1_1event__manager_1_1_event_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cb3855bd5daa733879e2626db9ad227 inherit pub_methods_classservices_1_1event__manager_1_1_event_handler" id="r_a8cb3855bd5daa733879e2626db9ad227"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classservices_1_1event__manager_1_1_event_handler.html#a8cb3855bd5daa733879e2626db9ad227">on_text_delta</a> (self, delta, snapshot)</td></tr>
<tr class="separator:a8cb3855bd5daa733879e2626db9ad227 inherit pub_methods_classservices_1_1event__manager_1_1_event_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4402d96c3f2f5a5c2a53aebbf7b343d inherit pub_methods_classservices_1_1event__manager_1_1_event_handler" id="r_ad4402d96c3f2f5a5c2a53aebbf7b343d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classservices_1_1event__manager_1_1_event_handler.html#ad4402d96c3f2f5a5c2a53aebbf7b343d">on_text_done</a> (self, text)</td></tr>
<tr class="separator:ad4402d96c3f2f5a5c2a53aebbf7b343d inherit pub_methods_classservices_1_1event__manager_1_1_event_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a388bc733a67fc1ac664c79116b82a2c4 inherit pub_methods_classservices_1_1event__manager_1_1_event_handler" id="r_a388bc733a67fc1ac664c79116b82a2c4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classservices_1_1event__manager_1_1_event_handler.html#a388bc733a67fc1ac664c79116b82a2c4">on_tool_call_created</a> (self, tool_call)</td></tr>
<tr class="separator:a388bc733a67fc1ac664c79116b82a2c4 inherit pub_methods_classservices_1_1event__manager_1_1_event_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12334a2e56f9b3c7be63a4128e71aeaa inherit pub_methods_classservices_1_1event__manager_1_1_event_handler" id="r_a12334a2e56f9b3c7be63a4128e71aeaa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classservices_1_1event__manager_1_1_event_handler.html#a12334a2e56f9b3c7be63a4128e71aeaa">on_tool_call_delta</a> (self, delta, snapshot)</td></tr>
<tr class="separator:a12334a2e56f9b3c7be63a4128e71aeaa inherit pub_methods_classservices_1_1event__manager_1_1_event_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae25b48c0a1a615b819caf177dd00a94 inherit pub_methods_classservices_1_1event__manager_1_1_event_handler" id="r_aae25b48c0a1a615b819caf177dd00a94"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classservices_1_1event__manager_1_1_event_handler.html#aae25b48c0a1a615b819caf177dd00a94">on_tool_call_done</a> (self, tool_call)</td></tr>
<tr class="separator:aae25b48c0a1a615b819caf177dd00a94 inherit pub_methods_classservices_1_1event__manager_1_1_event_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeee6d6dac7e998703cc4c5e9d623075 inherit pub_methods_classservices_1_1event__manager_1_1_event_handler" id="r_abeee6d6dac7e998703cc4c5e9d623075"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classservices_1_1event__manager_1_1_event_handler.html#abeee6d6dac7e998703cc4c5e9d623075">submit_tool_outputs</a> (self, tool_outputs)</td></tr>
<tr class="separator:abeee6d6dac7e998703cc4c5e9d623075 inherit pub_methods_classservices_1_1event__manager_1_1_event_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a64ce0633d6cc04e1148e7a437924ba4b" id="r_a64ce0633d6cc04e1148e7a437924ba4b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a64ce0633d6cc04e1148e7a437924ba4b">ws</a> = websocket</td></tr>
<tr class="separator:a64ce0633d6cc04e1148e7a437924ba4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8158a63c5d6db5eefbef43808904dab" id="r_aa8158a63c5d6db5eefbef43808904dab"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa8158a63c5d6db5eefbef43808904dab">expected_audio_index</a> = 0</td></tr>
<tr class="separator:aa8158a63c5d6db5eefbef43808904dab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0e096dcdb45752010c921ffff4cffd3" id="r_ad0e096dcdb45752010c921ffff4cffd3"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad0e096dcdb45752010c921ffff4cffd3">audio_buffer</a> = {}</td></tr>
<tr class="separator:ad0e096dcdb45752010c921ffff4cffd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0801efceae9d17f258da30f0ec261c38" id="r_a0801efceae9d17f258da30f0ec261c38"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0801efceae9d17f258da30f0ec261c38">stream_sid</a> = ''</td></tr>
<tr class="separator:a0801efceae9d17f258da30f0ec261c38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_attribs_classservices_1_1event__manager_1_1_event_handler"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_attribs_classservices_1_1event__manager_1_1_event_handler')"><img src="closed.png" alt="-"/>&#160;Data Fields inherited from <a class="el" href="classservices_1_1event__manager_1_1_event_handler.html">EventHandler</a></td></tr>
<tr class="memitem:acb6617135b0fd32aae7e8bcd4491cf44 inherit pub_attribs_classservices_1_1event__manager_1_1_event_handler" id="r_acb6617135b0fd32aae7e8bcd4491cf44"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classservices_1_1event__manager_1_1_event_handler.html#acb6617135b0fd32aae7e8bcd4491cf44">_events</a> = []</td></tr>
<tr class="separator:acb6617135b0fd32aae7e8bcd4491cf44 inherit pub_attribs_classservices_1_1event__manager_1_1_event_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5bc32b75da65fe60067f501a4bb6665 inherit pub_attribs_classservices_1_1event__manager_1_1_event_handler" id="r_ad5bc32b75da65fe60067f501a4bb6665"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classservices_1_1event__manager_1_1_event_handler.html#ad5bc32b75da65fe60067f501a4bb6665">client</a> = client</td></tr>
<tr class="separator:ad5bc32b75da65fe60067f501a4bb6665 inherit pub_attribs_classservices_1_1event__manager_1_1_event_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_classservices_1_1event__manager_1_1_event_handler"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pro_methods_classservices_1_1event__manager_1_1_event_handler')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classservices_1_1event__manager_1_1_event_handler.html">EventHandler</a></td></tr>
<tr class="memitem:a142819f6f7c8639f2a664c46b80f337a inherit pro_methods_classservices_1_1event__manager_1_1_event_handler" id="r_a142819f6f7c8639f2a664c46b80f337a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classservices_1_1event__manager_1_1_event_handler.html#a142819f6f7c8639f2a664c46b80f337a">_run_callback</a> (self, Callable callback, *Any args, **Any kwargs)</td></tr>
<tr class="separator:a142819f6f7c8639f2a664c46b80f337a inherit pro_methods_classservices_1_1event__manager_1_1_event_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classservices_1_1event__manager_1_1_event_handler"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pro_attribs_classservices_1_1event__manager_1_1_event_handler')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classservices_1_1event__manager_1_1_event_handler.html">EventHandler</a></td></tr>
<tr class="memitem:af82f490d6136d2e39721b932d274778f inherit pro_attribs_classservices_1_1event__manager_1_1_event_handler" id="r_af82f490d6136d2e39721b932d274778f"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classservices_1_1event__manager_1_1_event_handler.html#af82f490d6136d2e39721b932d274778f">_events</a> = {}</td></tr>
<tr class="separator:af82f490d6136d2e39721b932d274778f inherit pro_attribs_classservices_1_1event__manager_1_1_event_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">A class that handles streaming audio data over a WebSocket connection.

Args:
    websocket (WebSocket): The WebSocket connection to use for streaming.

Attributes:
    ws (WebSocket): The WebSocket connection.
    expected_audio_index (int): The expected index of the next audio chunk.
    audio_buffer (Dict[int, str]): A dictionary to store buffered audio chunks.
    stream_sid (str): The stream session ID.</pre> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad5909077629a817a218b754ab926ee4c" name="ad5909077629a817a218b754ab926ee4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5909077629a817a218b754ab926ee4c">&#9670;&#160;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__init__ </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WebSocket</td>          <td class="paramname"><span class="paramname"><em>websocket</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Initializes an instance of the EventEmitter class.
</pre> 
<p>Reimplemented from <a class="el" href="classservices_1_1event__manager_1_1_event_handler.html#abdd362d5f799ad16b5d6700efe590290">EventHandler</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   30</span>    <span class="keyword">def </span>__init__(self, websocket: WebSocket):</div>
<div class="line"><span class="lineno">   31</span>        super().__init__()</div>
<div class="line"><span class="lineno">   32</span>        self.ws = websocket</div>
<div class="line"><span class="lineno">   33</span>        self.expected_audio_index = 0</div>
<div class="line"><span class="lineno">   34</span>        self.audio_buffer: Dict[int, str] = {}</div>
<div class="line"><span class="lineno">   35</span>        self.stream_sid = <span class="stringliteral">&#39;&#39;</span></div>
<div class="line"><span class="lineno">   36</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00030">StreamService.__init__()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00030">StreamService.__init__()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classservices_1_1streaming__service_1_1_stream_service_ad5909077629a817a218b754ab926ee4c_cgraph.png" border="0" usemap="#aclassservices_1_1streaming__service_1_1_stream_service_ad5909077629a817a218b754ab926ee4c_cgraph" alt=""/></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classservices_1_1streaming__service_1_1_stream_service_ad5909077629a817a218b754ab926ee4c_icgraph.png" border="0" usemap="#aclassservices_1_1streaming__service_1_1_stream_service_ad5909077629a817a218b754ab926ee4c_icgraph" alt=""/></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="abaa8d74a6e33fc783a991ee3945dafc1" name="abaa8d74a6e33fc783a991ee3945dafc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaa8d74a6e33fc783a991ee3945dafc1">&#9670;&#160;</a></span>buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">buffer </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>audio</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Buffer the audio chunk for streaming.

If the index is None, the audio chunk is sent immediately.
If the index matches the expected index, the audio chunk is sent and the expected index is incremented.
If the index does not match the expected index, the audio chunk is buffered.

Args:
    index (int): The index of the audio chunk.
    audio (str): The audio chunk to buffer.</pre> <div class="fragment"><div class="line"><span class="lineno">   47</span>    <span class="keyword">async def </span>buffer(self, index: int, audio: str):</div>
<div class="line"><span class="lineno">   48</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   49</span><span class="stringliteral">        Buffer the audio chunk for streaming.</span></div>
<div class="line"><span class="lineno">   50</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   51</span><span class="stringliteral">        If the index is None, the audio chunk is sent immediately.</span></div>
<div class="line"><span class="lineno">   52</span><span class="stringliteral">        If the index matches the expected index, the audio chunk is sent and the expected index is incremented.</span></div>
<div class="line"><span class="lineno">   53</span><span class="stringliteral">        If the index does not match the expected index, the audio chunk is buffered.</span></div>
<div class="line"><span class="lineno">   54</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   55</span><span class="stringliteral">        Args:</span></div>
<div class="line"><span class="lineno">   56</span><span class="stringliteral">            index (int): The index of the audio chunk.</span></div>
<div class="line"><span class="lineno">   57</span><span class="stringliteral">            audio (str): The audio chunk to buffer.</span></div>
<div class="line"><span class="lineno">   58</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   59</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   60</span>        <span class="keywordflow">if</span> index <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   61</span>            await self.send_audio(audio)</div>
<div class="line"><span class="lineno">   62</span>        <span class="keywordflow">elif</span> index == self.expected_audio_index:</div>
<div class="line"><span class="lineno">   63</span>            await self.send_audio(audio)</div>
<div class="line"><span class="lineno">   64</span>            self.expected_audio_index += 1</div>
<div class="line"><span class="lineno">   65</span> </div>
<div class="line"><span class="lineno">   66</span>            <span class="keywordflow">while</span> self.expected_audio_index <span class="keywordflow">in</span> self.audio_buffer:</div>
<div class="line"><span class="lineno">   67</span>                buffered_audio = self.audio_buffer[self.expected_audio_index]</div>
<div class="line"><span class="lineno">   68</span>                await self.send_audio(buffered_audio)</div>
<div class="line"><span class="lineno">   69</span>                del self.audio_buffer[self.expected_audio_index]</div>
<div class="line"><span class="lineno">   70</span>                self.expected_audio_index += 1</div>
<div class="line"><span class="lineno">   71</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   72</span>            self.audio_buffer[index] = audio</div>
<div class="line"><span class="lineno">   73</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00034">StreamService.audio_buffer</a>, <a class="el" href="#l00033">StreamService.expected_audio_index</a>, and <a class="el" href="#l00082">StreamService.send_audio()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classservices_1_1streaming__service_1_1_stream_service_abaa8d74a6e33fc783a991ee3945dafc1_cgraph.png" border="0" usemap="#aclassservices_1_1streaming__service_1_1_stream_service_abaa8d74a6e33fc783a991ee3945dafc1_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="aecbc052233262275fc20a8ee8dfb8a47" name="aecbc052233262275fc20a8ee8dfb8a47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecbc052233262275fc20a8ee8dfb8a47">&#9670;&#160;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">reset </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Reset the expected audio index and clear the audio buffer.</pre> <div class="fragment"><div class="line"><span class="lineno">   74</span>    <span class="keyword">def </span>reset(self):</div>
<div class="line"><span class="lineno">   75</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   76</span><span class="stringliteral">        Reset the expected audio index and clear the audio buffer.</span></div>
<div class="line"><span class="lineno">   77</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   78</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   79</span>        self.expected_audio_index = 0</div>
<div class="line"><span class="lineno">   80</span>        self.audio_buffer = {}</div>
<div class="line"><span class="lineno">   81</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00034">StreamService.audio_buffer</a>, and <a class="el" href="#l00033">StreamService.expected_audio_index</a>.</p>

</div>
</div>
<a id="a038b22e1ed6a22ab7779e7ea254513fd" name="a038b22e1ed6a22ab7779e7ea254513fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a038b22e1ed6a22ab7779e7ea254513fd">&#9670;&#160;</a></span>send_audio()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">send_audio </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>audio</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Send the audio chunk over the WebSocket connection.

Args:
    audio (str): The audio chunk to send.</pre> <div class="fragment"><div class="line"><span class="lineno">   82</span>    <span class="keyword">async def </span>send_audio(self, audio: str):</div>
<div class="line"><span class="lineno">   83</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   84</span><span class="stringliteral">        Send the audio chunk over the WebSocket connection.</span></div>
<div class="line"><span class="lineno">   85</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   86</span><span class="stringliteral">        Args:</span></div>
<div class="line"><span class="lineno">   87</span><span class="stringliteral">            audio (str): The audio chunk to send.</span></div>
<div class="line"><span class="lineno">   88</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   89</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   90</span>        await self.ws.send_json({</div>
<div class="line"><span class="lineno">   91</span>            <span class="stringliteral">&quot;streamSid&quot;</span>: self.stream_sid,</div>
<div class="line"><span class="lineno">   92</span>            <span class="stringliteral">&quot;event&quot;</span>: <span class="stringliteral">&quot;media&quot;</span>,</div>
<div class="line"><span class="lineno">   93</span>            <span class="stringliteral">&quot;media&quot;</span>: {</div>
<div class="line"><span class="lineno">   94</span>                <span class="stringliteral">&quot;payload&quot;</span>: audio</div>
<div class="line"><span class="lineno">   95</span>            }</div>
<div class="line"><span class="lineno">   96</span>        })</div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span>        mark_label = str(uuid.uuid4())</div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>        await self.ws.send_json({</div>
<div class="line"><span class="lineno">  101</span>            <span class="stringliteral">&quot;streamSid&quot;</span>: self.stream_sid,</div>
<div class="line"><span class="lineno">  102</span>            <span class="stringliteral">&quot;event&quot;</span>: <span class="stringliteral">&quot;mark&quot;</span>,</div>
<div class="line"><span class="lineno">  103</span>            <span class="stringliteral">&quot;mark&quot;</span>: {</div>
<div class="line"><span class="lineno">  104</span>                <span class="stringliteral">&quot;name&quot;</span>: mark_label</div>
<div class="line"><span class="lineno">  105</span>            }</div>
<div class="line"><span class="lineno">  106</span>        })</div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>        await self.createEvent(<span class="stringliteral">&#39;audiosent&#39;</span>, mark_label)</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00041">EventHandler.createEvent()</a>, <a class="el" href="#l00010">CallContext.stream_sid</a>, <a class="el" href="#l00035">StreamService.stream_sid</a>, <a class="el" href="#l00046">TranscriptionService.stream_sid</a>, and <a class="el" href="#l00032">StreamService.ws</a>.</p>

<p class="reference">Referenced by <a class="el" href="#l00047">StreamService.buffer()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classservices_1_1streaming__service_1_1_stream_service_a038b22e1ed6a22ab7779e7ea254513fd_cgraph.png" border="0" usemap="#aclassservices_1_1streaming__service_1_1_stream_service_a038b22e1ed6a22ab7779e7ea254513fd_cgraph" alt=""/></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classservices_1_1streaming__service_1_1_stream_service_a038b22e1ed6a22ab7779e7ea254513fd_icgraph.png" border="0" usemap="#aclassservices_1_1streaming__service_1_1_stream_service_a038b22e1ed6a22ab7779e7ea254513fd_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="aff5f4cd092d5d265074e1d53820dec3f" name="aff5f4cd092d5d265074e1d53820dec3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff5f4cd092d5d265074e1d53820dec3f">&#9670;&#160;</a></span>set_stream_sid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">set_stream_sid </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str</td>          <td class="paramname"><span class="paramname"><em>stream_sid</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Set the stream session ID.

Args:
    stream_sid (str): The stream session ID.</pre> <div class="fragment"><div class="line"><span class="lineno">   37</span>    <span class="keyword">def </span>set_stream_sid(self, stream_sid: str):</div>
<div class="line"><span class="lineno">   38</span>        <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   39</span><span class="stringliteral">        Set the stream session ID.</span></div>
<div class="line"><span class="lineno">   40</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   41</span><span class="stringliteral">        Args:</span></div>
<div class="line"><span class="lineno">   42</span><span class="stringliteral">            stream_sid (str): The stream session ID.</span></div>
<div class="line"><span class="lineno">   43</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   44</span><span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   45</span>        self.stream_sid = stream_sid</div>
<div class="line"><span class="lineno">   46</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#l00010">CallContext.stream_sid</a>, <a class="el" href="#l00035">StreamService.stream_sid</a>, and <a class="el" href="#l00046">TranscriptionService.stream_sid</a>.</p>

</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a id="ad0e096dcdb45752010c921ffff4cffd3" name="ad0e096dcdb45752010c921ffff4cffd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0e096dcdb45752010c921ffff4cffd3">&#9670;&#160;</a></span>audio_buffer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dict audio_buffer = {}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="#l00047">StreamService.buffer()</a>, and <a class="el" href="#l00074">StreamService.reset()</a>.</p>

</div>
</div>
<a id="aa8158a63c5d6db5eefbef43808904dab" name="aa8158a63c5d6db5eefbef43808904dab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8158a63c5d6db5eefbef43808904dab">&#9670;&#160;</a></span>expected_audio_index</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int expected_audio_index = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="#l00047">StreamService.buffer()</a>, and <a class="el" href="#l00074">StreamService.reset()</a>.</p>

</div>
</div>
<a id="a0801efceae9d17f258da30f0ec261c38" name="a0801efceae9d17f258da30f0ec261c38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0801efceae9d17f258da30f0ec261c38">&#9670;&#160;</a></span>stream_sid</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stream_sid = ''</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="#l00057">TranscriptionService.get_stream_sid()</a>, <a class="el" href="#l00112">TranscriptionService.handle_transcription()</a>, <a class="el" href="#l00082">StreamService.send_audio()</a>, <a class="el" href="#l00037">StreamService.set_stream_sid()</a>, and <a class="el" href="#l00048">TranscriptionService.set_stream_sid()</a>.</p>

</div>
</div>
<a id="a64ce0633d6cc04e1148e7a437924ba4b" name="a64ce0633d6cc04e1148e7a437924ba4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64ce0633d6cc04e1148e7a437924ba4b">&#9670;&#160;</a></span>ws</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ws = websocket</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="#l00082">StreamService.send_audio()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/Users/seanbaker/Downloads/GPTPhone (2)/services/<a class="el" href="">streaming_service.py</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceservices.html">services</a></li><li class="navelem"><a class="el" href="namespaceservices_1_1streaming__service.html">streaming_service</a></li><li class="navelem"><a class="el" href="classservices_1_1streaming__service_1_1_stream_service.html">StreamService</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
